"use strict";(globalThis.webpackChunksacs=globalThis.webpackChunksacs||[]).push([[753],{1753:(Q,Z,a)=>{a.r(Z),a.d(Z,{AuthModule:()=>d});var f=a(8692),g=a(7976),A=a(6256),t=a(4537);class c{constructor(e,i){this.authService=e,this.router=i}canActivate(){return!this.authService.isUserAuthenticated()||(this.router.navigate(["/"]),!1)}canActivateChild(){return console.log("canActivateChild"),!this.authService.isUserAuthenticated()||(this.router.navigate(["/"]),!1)}canDeactivate(){return console.log("canDeactivate"),!0}canLoad(){return console.log("canLoad"),!0}}c.\u0275fac=function(e){return new(e||c)(t.LFG(A.e),t.LFG(g.F0))},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"});class p{constructor(){}ngOnInit(){}}p.\u0275fac=function(e){return new(e||p)},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-auth"]],decls:1,vars:0,template:function(e,i){1&e&&t._UZ(0,"router-outlet")},dependencies:[g.lC]});var r=a(92),T=a(434),y=a(7730),b=a(532),I=a(4590),l=a(4942),m=a(6707);function M(n,e){1&n&&(t.TgZ(0,"button",19),t._uU(1,"BUTTON.SIGNIN"),t.qZA())}function q(n,e){1&n&&(t.TgZ(0,"button",20),t._uU(1,"\n                                    "),t._UZ(2,"m4-icon",21),t._uU(3,"\n                                "),t.qZA())}const L=function(n){return{field:n}};class h{constructor(e,i,o,u,s,v){this._authService=e,this._utilityService=i,this._notifyService=o,this._localStorage=u,this._router=s,this._electronService=v,this.formSubmitted=!1,this.isLoading=!1}ngOnInit(){this.createForm()}createForm(){this.formData=new r.cw({username:new r.NI(null,[r.kI.required,r.kI.maxLength(50)]),password:new r.NI(null,[r.kI.required,r.kI.minLength(8),r.kI.maxLength(50)])})}submitForm(){this.formSubmitted=!0,this.formData.valid&&(this.isLoading=!0,this._authService.signin(this.formData.value).subscribe({next:e=>{this._localStorage.setLocalStorageItem(this._utilityService.localStrorage.accessToken,e.token),this._localStorage.setLocalStorageItem(this._utilityService.localStrorage.userDetails,JSON.stringify(e.item)),this._localStorage.setLocalStorageItem(this._utilityService.localStrorage.centerId,e.item.center_id),this._utilityService.success(e.message,this._notifyService);const i=e.item.role_type==b.GD.admin?"/super-master":"/master";this.isLoading=!1,this._router.navigate([i])},error:e=>{let i=this._utilityService.serverMessageHandler(e);this._utilityService.error(i,this._notifyService),this.isLoading=!1}}))}isFieldInvalid(e){return!this.formData.get(e).valid&&(this.formData.get(e).touched||this.formData.get(e).untouched&&this.formSubmitted)}}h.\u0275fac=function(e){return new(e||h)(t.Y36(A.e),t.Y36(y.t),t.Y36(l.c),t.Y36(T.n),t.Y36(g.F0),t.Y36(I.d))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-signin"]],decls:73,vars:19,consts:[[1,"container"],[1,"row","mx-0","height-full","align-items-center"],[1,"cell-5"],["data-role","validator","data-interactive-check","true",1,"card","form-box",3,"formGroup","ngSubmit"],["translate","",1,"card-header"],[1,"card-content","pt-0"],[1,"row"],[1,"cell-12"],[1,"form-group"],["translate",""],["type","text","name","username","id","username","formControlName","username","data-validate","required",3,"placeholder"],[1,"invalid_feedback"],["translate","",3,"translateParams"],["type","password","name","password","id","password","formControlName","password","data-validate","required",3,"placeholder"],[1,"form-group","mt-2"],["type","submit","m4-button","","btn-style","primary","class","w-100","translate","",4,"ngIf"],["type","button","m4-button","","btn-style","primary","class","w-100","translate","",4,"ngIf"],[1,"cell-7"],["src","assets/images/login-img.png","alt","Login Image",1,"d-block","ml-auto"],["type","submit","m4-button","","btn-style","primary","translate","",1,"w-100"],["type","button","m4-button","","btn-style","primary","translate","",1,"w-100"],["icon","spinner","m4-animation","spin"]],template:function(e,i){1&e&&(t._uU(0,"\n"),t.TgZ(1,"div",0),t._uU(2,"\n    "),t.TgZ(3,"div",1),t._uU(4,"\n        "),t.TgZ(5,"div",2),t._uU(6,"\n            "),t._uU(7,"\n            "),t._uU(8,"\n            "),t.TgZ(9,"form",3),t.NdJ("ngSubmit",function(){return i.submitForm()}),t._uU(10,"\n                "),t.TgZ(11,"div",4),t._uU(12,"\n                    FORM.HEADER.LOGIN\n                "),t.qZA(),t._uU(13,"\n                "),t.TgZ(14,"div",5),t._uU(15,"\n                    "),t.TgZ(16,"div",6),t._uU(17,"\n                        "),t.TgZ(18,"div",7),t._uU(19,"\n                            "),t.TgZ(20,"div",8),t._uU(21,"\n                                "),t.TgZ(22,"label",9),t._uU(23,"FORM.LABEL.USER_NAME"),t.qZA(),t._uU(24,"\n                                "),t._UZ(25,"input",10),t.ALo(26,"translate"),t._uU(27,"\n                                "),t.TgZ(28,"div",11),t._uU(29,"\n                                    "),t.TgZ(30,"p",12),t.ALo(31,"translate"),t._uU(32,"VALIDATION.IS_REQUIRED"),t.qZA(),t._uU(33,"\n                                "),t.qZA(),t._uU(34,"\n                                "),t._uU(35,"\n                            "),t.qZA(),t._uU(36,"\n                            "),t.TgZ(37,"div",8),t._uU(38,"\n                                "),t.TgZ(39,"label",9),t._uU(40,"FORM.LABEL.PASSWORD"),t.qZA(),t._uU(41,"\n                                "),t._UZ(42,"input",13),t.ALo(43,"translate"),t._uU(44,"\n                                "),t.TgZ(45,"div",11),t._uU(46,"\n                                    "),t.TgZ(47,"p",12),t.ALo(48,"translate"),t._uU(49,"VALIDATION.IS_REQUIRED"),t.qZA(),t._uU(50,"\n                                "),t.qZA(),t._uU(51,"\n                                "),t._uU(52,"\n                            "),t.qZA(),t._uU(53,"\n                            "),t._uU(54,"\n                            "),t.TgZ(55,"div",14),t._uU(56,"\n                                "),t.YNc(57,M,2,0,"button",15),t._uU(58,"\n                                "),t.YNc(59,q,4,0,"button",16),t._uU(60,"\n                              "),t.qZA(),t._uU(61,"\n                        "),t.qZA(),t._uU(62,"\n                    "),t.qZA(),t._uU(63,"\n                   \n                "),t.qZA(),t._uU(64,"\n            "),t.qZA(),t._uU(65,"\n        "),t.qZA(),t._uU(66,"\n        "),t.TgZ(67,"div",17),t._uU(68,"\n            "),t._UZ(69,"img",18),t._uU(70,"\n        "),t.qZA(),t._uU(71,"\n    "),t.qZA(),t._uU(72,"\n\n"),t.qZA()),2&e&&(t.xp6(9),t.Q6J("formGroup",i.formData),t.xp6(16),t.s9C("placeholder",t.lcZ(26,7,"FORM.LABEL.USER_NAME")),t.xp6(5),t.Q6J("translateParams",t.VKq(15,L,t.lcZ(31,9,"FORM.LABEL.USER_NAME"))),t.xp6(12),t.s9C("placeholder",t.lcZ(43,11,"FORM.LABEL.PASSWORD")),t.xp6(5),t.Q6J("translateParams",t.VKq(17,L,t.lcZ(48,13,"FORM.LABEL.PASSWORD"))),t.xp6(10),t.Q6J("ngIf",!i.isLoading),t.xp6(2),t.Q6J("ngIf",i.isLoading))},dependencies:[f.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,l.Hq,l.oJ,l.Vy,m.Pi,m.X$]});var C=a(6198);const S=function(n){return{field:n}};function E(n,e){1&n&&(t.TgZ(0,"p",26),t.ALo(1,"translate"),t._uU(2,"\n                                        VALIDATION.IS_REQUIRED\n                                    "),t.qZA()),2&n&&t.Q6J("translateParams",t.VKq(3,S,t.lcZ(1,1,"LOAD.CENTER")))}function N(n,e){if(1&n){const i=t.EpF();t.TgZ(0,"div",10),t._uU(1,"\n                                "),t.TgZ(2,"m4-select",23,24),t.NdJ("ngModelChange",function(u){t.CHM(i);const s=t.oxw();return t.KtG(s.formData.center_id=u)}),t.qZA(),t._uU(4,"\n                                "),t.TgZ(5,"div",14),t._uU(6,"\n                                    "),t.YNc(7,E,3,5,"p",25),t._uU(8,"\n                                "),t.qZA(),t._uU(9,"\n                            "),t.qZA()}if(2&n){const i=t.MAs(3),o=t.oxw(),u=t.MAs(7);t.xp6(2),t.Q6J("ngModel",o.formData.center_id)("options",o.centerList),t.xp6(5),t.Q6J("ngIf",!o.formData.center_id&&(i.dirty||i.touched||u.submitted))}}function R(n,e){1&n&&(t.TgZ(0,"p",26),t.ALo(1,"translate"),t._uU(2,"\n                                            VALIDATION.IS_REQUIRED\n                                        "),t.qZA()),2&n&&t.Q6J("translateParams",t.VKq(3,S,t.lcZ(1,1,"FORM.LABEL.USER_NAME")))}function D(n,e){if(1&n&&(t.ynx(0),t._uU(1,"\n                                        "),t.YNc(2,R,3,5,"p",25),t._uU(3,"\n                                    "),t.BQk()),2&n){t.oxw();const i=t.MAs(26);t.xp6(2),t.Q6J("ngIf",i.errors.required)}}function F(n,e){1&n&&(t.TgZ(0,"p",26),t.ALo(1,"translate"),t._uU(2,"\n                                            VALIDATION.IS_REQUIRED\n                                        "),t.qZA()),2&n&&t.Q6J("translateParams",t.VKq(3,S,t.lcZ(1,1,"FORM.LABEL.PASSWORD")))}function O(n,e){if(1&n&&(t.ynx(0),t._uU(1,"\n                                        "),t.YNc(2,F,3,5,"p",25),t._uU(3,"\n                                    "),t.BQk()),2&n){t.oxw();const i=t.MAs(41);t.xp6(2),t.Q6J("ngIf",i.errors.required)}}function x(n,e){1&n&&(t.TgZ(0,"button",27),t._uU(1,"BUTTON.SIGNIN"),t.qZA())}function B(n,e){1&n&&(t.TgZ(0,"button",28),t._uU(1,"\n                                    "),t._UZ(2,"m4-icon",29),t._uU(3,"\n                                "),t.qZA())}class U{constructor(e,i,o,u,s,v,w){this._authService=e,this._utilityService=i,this._generalService=o,this._notifyService=u,this._localStorage=s,this._router=v,this._translateService=w,this.formData={username:"",password:"",center_id:""},this.loading={button:!1,list:!1},this.isFirstTimeLogin="true",this.centerList=[],this.queryParam={sort:"",sortBy:"",skip:"",limit:"",q:"",zone_id:0,center_type:0,state_id:0},this.registeredUser=this._localStorage.getLocalStorageItem(this._utilityService.localStrorage.registeredUser),console.log("this.registeredUser-- ==> ",this.registeredUser)}ngOnInit(){(null===this.registeredUser||"false"==this.registeredUser)&&this.getCenterListing()}getCenterListing(){this.loading.list=!0,this._generalService.getCenterListWithoutToken("center",this.queryParam).subscribe({next:e=>{this.centerList=this._utilityService.arrToDropDownArr(e.list,"center_name","center_id",""),this.loading.list=!1},error:e=>{this.loading.list=!1}})}submitForm(e){e.valid&&(this.loading.button=!0,this._authService.signinBranch(e.value).subscribe({next:i=>{this._localStorage.setLocalStorageItem(this._utilityService.localStrorage.registeredUser,this.isFirstTimeLogin),this._localStorage.setLocalStorageItem(this._utilityService.localStrorage.accessToken,i.token),this._localStorage.setLocalStorageItem(this._utilityService.localStrorage.userDetails,JSON.stringify(i.item)),this._localStorage.setLocalStorageItem(this._utilityService.localStrorage.centerId,i.item.center_id),this._utilityService.success(i.message,this._notifyService),this.loading.button=!1,this._router.navigate(null===this.registeredUser||"false"==this.registeredUser?["/master/center-master-setup"]:["/dashboard"])},error:i=>{let o=this._utilityService.serverMessageHandler(i);this._utilityService.error(o,this._notifyService),this.loading.button=!1}}))}}U.\u0275fac=function(e){return new(e||U)(t.Y36(A.e),t.Y36(y.t),t.Y36(C.m),t.Y36(l.c),t.Y36(T.n),t.Y36(g.F0),t.Y36(m.sK))},U.\u0275cmp=t.Xpm({type:U,selectors:[["app-signin-bm"]],decls:68,vars:13,consts:[[1,"container"],[1,"row","mx-0","height-full","align-items-center"],[1,"cell-5"],[1,"card","form-box",3,"ngSubmit"],["form","ngForm"],["translate","",1,"card-header"],[1,"card-content","pt-0"],[1,"row"],[1,"cell-12"],["class","form-group",4,"ngIf"],[1,"form-group"],["translate",""],["type","text","name","username","id","username","required","",3,"ngModel","placeholder","ngModelChange"],["username","ngModel"],[1,"required-wrapper"],[4,"ngIf"],["type","password","name","password","id","password","required","",3,"ngModel","placeholder","ngModelChange"],["password","ngModel"],[1,"form-group","mt-2"],["type","submit","m4-button","","btn-style","primary","class","w-100","translate","",4,"ngIf"],["type","button","m4-button","","btn-style","primary","class","w-100","translate","",4,"ngIf"],[1,"cell-7"],["src","assets/images/login-img.png","alt","Login Image",1,"d-block","ml-auto"],["name","center_id","id","center_id","required","",3,"ngModel","options","ngModelChange"],["center_id","ngModel"],["translate","",3,"translateParams",4,"ngIf"],["translate","",3,"translateParams"],["type","submit","m4-button","","btn-style","primary","translate","",1,"w-100"],["type","button","m4-button","","btn-style","primary","translate","",1,"w-100"],["icon","spinner","m4-animation","spin"]],template:function(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"div",0),t._uU(1,"\n    "),t.TgZ(2,"div",1),t._uU(3,"\n        "),t.TgZ(4,"div",2),t._uU(5,"\n            "),t.TgZ(6,"form",3,4),t.NdJ("ngSubmit",function(){t.CHM(o);const s=t.MAs(7);return t.KtG(i.submitForm(s))}),t._uU(8,"\n                "),t.TgZ(9,"div",5),t._uU(10,"\n                    FORM.HEADER.LOGIN\n                "),t.qZA(),t._uU(11,"\n                "),t.TgZ(12,"div",6),t._uU(13,"\n                    "),t.TgZ(14,"div",7),t._uU(15,"\n                        "),t.TgZ(16,"div",8),t._uU(17,"\n                            "),t.YNc(18,N,10,3,"div",9),t._uU(19,"\n                            "),t.TgZ(20,"div",10),t._uU(21,"\n                                "),t.TgZ(22,"label",11),t._uU(23,"FORM.LABEL.USER_NAME"),t.qZA(),t._uU(24,"\n                                "),t.TgZ(25,"input",12,13),t.NdJ("ngModelChange",function(s){return i.formData.username=s}),t.ALo(27,"translate"),t.qZA(),t._uU(28,"\n                                "),t.TgZ(29,"div",14),t._uU(30,"\n                                    "),t.YNc(31,D,4,1,"ng-container",15),t._uU(32,"\n                                "),t.qZA(),t._uU(33,"\n                            "),t.qZA(),t._uU(34,"\n                            "),t.TgZ(35,"div",10),t._uU(36,"\n                                "),t.TgZ(37,"label",11),t._uU(38,"FORM.LABEL.PASSWORD"),t.qZA(),t._uU(39,"\n                                "),t.TgZ(40,"input",16,17),t.NdJ("ngModelChange",function(s){return i.formData.password=s}),t.ALo(42,"translate"),t.qZA(),t._uU(43,"\n                                "),t.TgZ(44,"div",14),t._uU(45,"\n                                    "),t.YNc(46,O,4,1,"ng-container",15),t._uU(47,"\n                                "),t.qZA(),t._uU(48,"\n                            "),t.qZA(),t._uU(49,"\n                            "),t.TgZ(50,"div",18),t._uU(51,"\n                                "),t.YNc(52,x,2,0,"button",19),t._uU(53,"\n                                "),t.YNc(54,B,4,0,"button",20),t._uU(55,"\n                              "),t.qZA(),t._uU(56,"\n                        "),t.qZA(),t._uU(57,"\n                    "),t.qZA(),t._uU(58,"\n                   \n                "),t.qZA(),t._uU(59,"\n            "),t.qZA(),t._uU(60,"\n        "),t.qZA(),t._uU(61,"\n        "),t.TgZ(62,"div",21),t._uU(63,"\n            "),t._UZ(64,"img",22),t._uU(65,"\n        "),t.qZA(),t._uU(66,"\n    "),t.qZA(),t._uU(67,"\n\n"),t.qZA()}if(2&e){const o=t.MAs(7),u=t.MAs(26),s=t.MAs(41);t.xp6(18),t.Q6J("ngIf",null===i.registeredUser||"false"==i.registeredUser),t.xp6(7),t.s9C("placeholder",t.lcZ(27,9,"FORM.LABEL.USER_NAME")),t.Q6J("ngModel",i.formData.username),t.xp6(6),t.Q6J("ngIf",u.errors&&(u.dirty||u.touched||o.submitted)),t.xp6(9),t.s9C("placeholder",t.lcZ(42,11,"FORM.LABEL.PASSWORD")),t.Q6J("ngModel",i.formData.password),t.xp6(6),t.Q6J("ngIf",s.errors&&(s.dirty||s.touched||o.submitted)),t.xp6(6),t.Q6J("ngIf",!i.loading.button),t.xp6(2),t.Q6J("ngIf",i.loading.button)}},dependencies:[f.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.On,r.F,l.Hq,l.oJ,l.Vy,l.Hr,m.Pi,m.X$]});const J=[{path:"",component:p,children:[{path:"",redirectTo:"signin",pathMatch:"full"},{path:"signin",canActivate:[c],component:h},{path:"branch/signin",canActivate:[c],component:U}]}];class _{}_.\u0275fac=function(e){return new(e||_)},_.\u0275mod=t.oAB({type:_}),_.\u0275inj=t.cJS({imports:[g.Bz.forChild(J),g.Bz]});class d{}d.\u0275fac=function(e){return new(e||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({imports:[f.ez,_,r.UX,r.u5,l.L3,m.aw.forChild()]})}}]);