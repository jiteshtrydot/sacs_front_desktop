import{N as C}from"./navbar-sidebar.cfa267da.js";import{a as P,V as w,u as S,r as b,ap as E,b as j,aq as q,d,j as s,K as f,ar as L}from"./index.b6833530.js";import{E as B}from"./breadcrumb.f211a126.js";import"./index.esm.6e0b1c9e.js";import"./utils.7e7ecbc8.js";import"./logo.265d9f73.js";import"./Input.e13d00be.js";const V=function(){const g=P(),{id:u}=w(),h=S(),[c,m]=b.exports.useState({});b.exports.useEffect(()=>{g(E({id:u}))},[]);const{SaveDatalist:l,GetDatalist:o}=j(e=>({SaveDatalist:e.RoleAccess.SaveRolesAccesslist,GetDatalist:e.RoleAccess.GetRolesAccesslist}));b.exports.useEffect(()=>{(l==null?void 0:l.success)==!0&&(g(q()),h(y))},[l]),b.exports.useEffect(()=>{if(Array.isArray(o==null?void 0:o.data)){const e={};o==null||o.data.forEach(r=>{e[r.module_name]=r.permissions}),m(e)}},[o]);const k=()=>Object.entries(c||{}).map(([e,r])=>({module_name:e,permissions:r})),N=(e,r)=>{m(a=>{var t;return{...a,[e]:{...a[e],[r]:!((t=a[e])!=null&&t[r])}}})},x=e=>{const r=i.every(t=>{var n;return(n=c[t])==null?void 0:n[e]}),a={...c};i.forEach(t=>{a[t]||(a[t]={}),a[t][e]=!r}),m(a)},v=async()=>{const e=await k();g(L({role_id:u,modules:e}))},p=["view","add","edit","delete"],i=["Dashboard","User","Roles","Customer","Product","Order","Lead","Report","Packing Type","Company","Category","Banner","Taglog","Crop"];let R="Role Access List",A="Role List",y="/roles/list";return d(C,{isFooter:!1,isSidebar:!0,isNavbar:!0,isRightSidebar:!0,children:[s(B,{Name:R,ParentName:A,ParentLink:y}),d("div",{className:"mt-[2rem] bg-white dark:bg-gray-800 p-4",children:[s("div",{className:"overflow-x-auto",children:d("table",{className:"w-full border-none dark:bg-gray-800 rounded-lg shadow-md dark:text-gray-50",children:[s("thead",{children:d("tr",{className:"bg-gray-100 dark:bg-gray-800 text-left",children:[s("th",{className:"p-3 border border-gray-200 dark:border-gray-700",children:"Name"}),p.map(e=>s("th",{className:"p-3 border border-gray-200 dark:border-gray-700 text-center",children:d("div",{className:"flex gap-x-3 justify-center items-center",children:[s("span",{children:e}),s("input",{type:"checkbox",className:"w-5 h-5 border-gray-300 focus:ring-0 focus:border-none rounded-md",checked:i.every(r=>{var a;return(a=c[r])==null?void 0:a[e]}),onChange:()=>x(e)})]})},e))]})}),s("tbody",{children:i.map((e,r)=>d("tr",{className:r%2===0?"bg-gray-50 dark:bg-gray-800":"bg-white dark:bg-gray-800",children:[s("td",{className:"p-3 border border-gray-200 dark:border-gray-700",children:e}),p.map((a,t)=>{var n;return s("td",{className:"p-3 border border-gray-200 dark:border-gray-700 text-center",children:s("input",{type:"checkbox",className:"w-5 h-5 border-gray-300 focus:ring-0 focus:border-none rounded-md",checked:!!((n=c[e])!=null&&n[a]),onChange:()=>N(e,a)})},t)})]},e))})]})}),d("div",{className:"flex gap-x-3 justify-end mt-[3rem]",children:[s(f,{className:"bg-addbutton hover:bg-addbutton dark:bg-addbutton dark:hover:bg-addbutton",onClick:()=>v(),children:"Save Permission"}),s(f,{className:"bg-deletebutton hover:bg-deletebutton dark:bg-deletebutton dark:hover:bg-deletebutton",onClick:()=>h("/roles/list"),children:"Close"})]})]})]})};export{V as default};
