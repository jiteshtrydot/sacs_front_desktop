import{V as Ye,a as qe,r as s,a9 as ce,aa as $e,b as v,u as Ge,ab as Je,ac as Te,ad as Ze,E as ie,d as r,F as ze,j as t,K as ue}from"./index.b6833530.js";import{N as Ke}from"./navbar-sidebar.cfa267da.js";import{E as He}from"./breadcrumb.f211a126.js";import{u as Qe,c as We,a as p,F as Xe,L as d}from"./formik.esm.1dcdd950.js";import{S as f}from"./react-select.esm.eb1ccb54.js";import{F as c}from"./FormFeedback.b1d46ea7.js";import{I as h}from"./Input.e13d00be.js";import{I as De}from"./imageuploader.08f1031a.js";import{h as x}from"./moment.40bc58bf.js";import Ue from"./ToastMessage.356bd70a.js";import"./index.esm.6e0b1c9e.js";import"./utils.7e7ecbc8.js";import"./logo.265d9f73.js";const Le="http://192.168.1.7:8000",ha=function(){const{id:u}=Ye(),g=qe(),[T,me]=s.exports.useState(null);s.exports.useEffect(()=>{g(ce()),u?g($e({id:u})):(a.values.name="",a.values.email="",a.values.gender="",a.values.mobile_no="",a.values.address="",a.values.date_of_birth="",a.values.date_of_joining="",a.values.emergency_mobile_no="",a.values.emergency_contact_person="",a.values.aadhar_card="",a.values.pan_card="",a.values.bank_passbook=null)},[u]);const[e,pe]=s.exports.useState(),{UserView:y}=v(l=>({UserView:l.User.UserView}));s.exports.useEffect(()=>{pe(y?y.data:null)},[y]);const[he,N]=s.exports.useState(null),[Z,k]=s.exports.useState(null),[_e,w]=s.exports.useState(0),be=l=>{l?(w(0),k(l.value),N(l)):(w(1),k(null),N(null))},S=[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Other",value:"other"}],m=[{label:"Yes",value:!0},{label:"No",value:!1}],P=[{label:"Active",value:!0},{label:"Inactive",value:!1}],[ge,A]=s.exports.useState(null),[z,R]=s.exports.useState(null),[fe,E]=s.exports.useState(0),ve=l=>{l?(E(0),R(l.value),A(l)):(E(1),R(null),A(null))},[xe,C]=s.exports.useState(null),[K,F]=s.exports.useState(null),[ye,B]=s.exports.useState(0),Ne=l=>{l?(B(0),F(!!l.value),C(l)):(B(1),F(null),C(null))},[ke,V]=s.exports.useState(null),[H,j]=s.exports.useState(null),[we,I]=s.exports.useState(0),Se=l=>{l?(I(0),j(l.value),V(l)):(I(1),j(null),V(null))},[Pe,M]=s.exports.useState(null),[Q,O]=s.exports.useState(null),[Ae,Y]=s.exports.useState(0),Re=l=>{l?(Y(0),O(l.value),M(l)):(Y(1),O(null),M(null))},[Ee,q]=s.exports.useState(null),[W,$]=s.exports.useState(null),[Ce,G]=s.exports.useState(0),Fe=l=>{l?(G(0),$(l.value),q(l)):(G(1),$(null),q(null))},X=Ge(),[Be,Ve]=s.exports.useState({name:"",email:"",gender:"",role:{role_title:"",_id:""},password:"",mobile_no:"",address:"",date_of_birth:"",date_of_joining:"",is_active:"",emergency_mobile_no:"",emergency_contact_person:"",aadhar_card:"",pan_card:"",bank_passbook:null,user_pic:""}),a=Qe({enableReinitialize:!0,initialValues:Be,validationSchema:We({name:p().required("Please Enter Advisor Name"),email:p().required("Please Enter Email").matches(/^[^@]+@[^@]+$/,"Email must contain exactly one '@'").matches(/@[^@]+\.[^@]+$/,"Email must contain exactly one '.' after '@'").matches(/^[^\s@]+@[^\s@]+\.[^\s@]+$/,"Invalid email format"),password:p().when([],{is:()=>!u,then:l=>l.required("Please Enter Password").min(5,"Password must be at least 5 characters long").max(10,"Password must be at most 10 characters long").matches(/[A-Z]/,"Password must contain at least one uppercase letter (A-Z)").matches(/\d/,"Password must contain at least one numeric digit (0-9)").matches(/[@$!%*?&]/,"Password must contain at least one special character (@$!%*?&)"),otherwise:l=>l.notRequired()}),mobile_no:p().required("Please Enter Mobile Number").matches(/^\d{10}$/,"Mobile number must be 10 digits"),address:p().required("Please Enter Address"),emergency_mobile_no:p().required("Please Enter Emergency Mobile Number").matches(/^\d{10}$/,"Mobile number must be 10 digits"),emergency_contact_person:p().required("Please Enter Emergency Contact Person"),date_of_birth:p().required("Please Enter Date of birth"),date_of_joining:p().required("Please Enter Date of joining")}),onSubmit:l=>{if(z==null)return E(1);if(Z==null)return w(1);if(K==null)return B(1);if(H==null)return I(1);if(Q==null)return Y(1);if(W==null)return G(1);const n=new FormData;n.append("name",l.name),n.append("email",l.email),u||n.append("password",l.password),n.append("gender",z),n.append("mobile_no",String(l.mobile_no)),n.append("date_of_joining",x(l==null?void 0:l.date_of_joining).format("DD-MM-YYYY")),n.append("date_of_birth",x(l.date_of_birth).format("DD-MM-YYYY")),n.append("emergency_mobile_no",String(l.emergency_mobile_no)),n.append("emergency_contact_person",l.emergency_contact_person),n.append("address",l.address),n.append("aadhar_card",JSON.stringify(H)),n.append("pan_card",JSON.stringify(Q)),n.append("bank_passbook",JSON.stringify(W)),n.append("is_active",JSON.stringify(K)),n.append("role",Z),T instanceof File&&n.append("user_pic",T),u?(n.append("id",u),g(Je(n))):g(Te(n))}}),D=v(l=>l.Role.Roleslist||[]),je=D&&D.map(l=>({label:l.role_title,value:l._id}));s.exports.useEffect(()=>{g(Ze())},[]);const b=v(l=>l.User.AddUserlistdata||[]),_=v(l=>l.User.UpdateUserList||[]);s.exports.useEffect(()=>{((b==null?void 0:b.success)==!0||(_==null?void 0:_.success)==!0)&&(_?ie.success(_==null?void 0:_.msg):ie.success(b==null?void 0:b.msg),X(J),g(ce()),a.resetForm())},[b,_]),s.exports.useEffect(()=>{var l,n,L,ee;if(e){if(Ve(o=>{var i,ae,le,re,te,se,oe,ne,de;return{...o,name:(i=e==null?void 0:e.name)!=null?i:"",email:(ae=e==null?void 0:e.email)!=null?ae:"",gender:(le=e==null?void 0:e.gender)!=null?le:"",mobile_no:e==null?void 0:e.mobile_no,address:(re=e==null?void 0:e.address)!=null?re:"",date_of_birth:e!=null&&e.date_of_birth?x(e.date_of_birth).format("YYYY-DD-MM"):"",date_of_joining:e!=null&&e.date_of_joining?x(e.date_of_joining).format("YYYY-DD-MM"):"",emergency_mobile_no:(te=e==null?void 0:e.emergency_mobile_no)!=null?te:"",emergency_contact_person:(se=e==null?void 0:e.emergency_contact_person)!=null?se:"",aadhar_card:(oe=e==null?void 0:e.aadhar_card)!=null?oe:"",pan_card:(ne=e==null?void 0:e.pan_card)!=null?ne:"",bank_passbook:(de=e==null?void 0:e.bank_passbook)!=null?de:null}}),N({label:e==null?void 0:e.role.role_title,value:e==null?void 0:e.role._id}),k((l=e==null?void 0:e.role)!=null&&l._id?(n=e==null?void 0:e.role)==null?void 0:n._id:null),(e==null?void 0:e.gender)&&S.length>0){const o=S.find(i=>i.value===e.gender);A(o||null),R(o?String(o.value):"")}if((e==null?void 0:e.is_active)!==void 0&&(e==null?void 0:e.is_active)!==null&&P.length>0){const o=P.find(i=>i.value===e.is_active);C(o),F((L=o==null?void 0:o.value)!=null?L:null)}if((e==null?void 0:e.aadhar_card)!==void 0&&(e==null?void 0:e.aadhar_card)!==null&&m.length>0){const o=m.find(i=>i.value===e.aadhar_card);V(o||null),j(o==null?void 0:o.value)}if((e==null?void 0:e.pan_card)!==void 0&&(e==null?void 0:e.pan_card)!==null&&m.length>0){const o=m.find(i=>i.value===e.pan_card);M(o||null),O(o==null?void 0:o.value)}if((e==null?void 0:e.bank_passbook)!==void 0&&(e==null?void 0:e.bank_passbook)!==null&&m.length>0){const o=m.find(i=>i.value===e.bank_passbook);q(o),$((ee=o==null?void 0:o.value)!=null?ee:null)}}},[e]);const U=new Date,Ie=new Date(U.setFullYear(U.getFullYear()-18)).toISOString().split("T")[0];let Me=u?"Advisor Update":"Advisor Add",Oe="Advisor List",J="/users/list";return r(ze,{children:[r(Ke,{isFooter:!1,isSidebar:!0,isNavbar:!0,isRightSidebar:!0,children:[t(He,{Name:Me,ParentName:Oe,ParentLink:J}),t("div",{className:"mt-[2rem] bg-white dark:bg-gray-800 p-4",children:r(Xe,{onSubmit:l=>(l.preventDefault(),a.handleSubmit(),!1),children:[t(De,{onFileSelect:me,defaultImage:e!=null&&e.user_pic?`${Le}/public/user/${e==null?void 0:e.user_pic}`:""}),r("div",{className:"md:flex gap-x-[2rem]",children:[r("div",{className:"flex-1 mt-[1rem]",children:[r(d,{htmlFor:"AdvisorName",children:["Advisor Name ",t("span",{className:"text-red-500",children:"*"})," "]}),r("div",{className:"mt-1",children:[t(h,{id:"name",name:"name",className:"bg-gray-50 border border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:border-blue-500 dark:focus:ring-blue-500 dark:placeholder-gray-400 dark:text-white disabled:cursor-not-allowed disabled:opacity-50 focus:border-blue-500 focus:ring-blue-500 p-2.5 rounded-lg text-gray-900 text-sm w-full",placeholder:"Advisor Name",type:"text",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.name||"",invalid:!!(a.touched.name&&a.errors.name)}),a.touched.name&&a.errors.name?r(c,{type:"invalid",className:"text-Red text-sm",children:[" ",a.errors.name,"  "]}):null]})]}),r("div",{className:"flex-1 mt-[1rem]",children:[r(d,{htmlFor:"email",children:["Email ",t("span",{className:"text-red-500",children:"*"})," "]}),r("div",{className:"mt-1",children:[t(h,{id:"email",name:"email",className:"bg-gray-50 border border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:border-blue-500 dark:focus:ring-blue-500 dark:placeholder-gray-400 dark:text-white disabled:cursor-not-allowed disabled:opacity-50 focus:border-blue-500 focus:ring-blue-500 p-2.5 rounded-lg text-gray-900 text-sm w-full",placeholder:"Advisor email",type:"email",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.email||"",invalid:!!(a.touched.email&&a.errors.email)}),a.touched.email&&a.errors.email?r(c,{type:"invalid",className:"text-Red text-sm",children:[" ",a.errors.email,"  "]}):null]})]}),r("div",{className:"flex-1 mt-[1rem]",children:[r(d,{htmlFor:"email",children:["Gender ",t("span",{className:"text-red-500",children:"*"})," "]}),r("div",{className:"mt-1",children:[t(f,{className:"w-full dark:text-white",classNames:{control:()=>"react-select__control",singleValue:()=>"react-select__single-value",menu:()=>"react-select__menu",option:({isSelected:l})=>l?"react-select__option--is-selected":"react-select__option",placeholder:()=>"react-select__placeholder"},value:ge,onChange:l=>{ve(l)},options:S,isClearable:!0}),fe==1?t(c,{type:"invalid",className:"text-Red text-sm",children:" Please select gender  "}):null]})]})]}),r("div",{className:"md:flex  gap-x-[2rem]",children:[r("div",{className:"flex-1 mt-[1rem]",children:[r(d,{htmlFor:"role",children:["Role ",t("span",{className:"text-red-500",children:"*"})," "]}),r("div",{className:"mt-1",children:[t(f,{className:"w-full dark:text-white",classNames:{control:()=>"react-select__control",singleValue:()=>"react-select__single-value",menu:()=>"react-select__menu",option:({isSelected:l})=>l?"react-select__option--is-selected":"react-select__option",placeholder:()=>"react-select__placeholder"},value:he,onChange:l=>{be(l)},options:je,isClearable:!0}),_e==1?t(c,{type:"invalid",className:"text-Red text-sm",children:" Please select role  "}):null]})]}),r("div",{className:"flex-1 mt-[1rem]",children:[r(d,{htmlFor:"password",children:["Password ",t("span",{className:"text-red-500",children:"*"})," "]}),r("div",{className:"mt-1",children:[t(h,{id:"password",name:"password",className:"bg-gray-50 border border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:border-blue-500 dark:focus:ring-blue-500 dark:placeholder-gray-400 dark:text-white disabled:cursor-not-allowed disabled:opacity-50 focus:border-blue-500 focus:ring-blue-500 p-2.5 rounded-lg text-gray-900 text-sm w-full",placeholder:"Password",type:"password",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.password||"",invalid:!!(a.touched.password&&a.errors.password)}),a.touched.password&&a.errors.password?r(c,{type:"invalid",className:"text-Red text-sm",children:[" ",a.errors.password,"  "]}):null]})]}),r("div",{className:"flex-1 mt-[1rem]",children:[r(d,{htmlFor:"mobile_no",children:[" Mobile Number ",t("span",{className:"text-red-500",children:"*"})," "]}),r("div",{className:"mt-1",children:[t(h,{id:"mobile_no",name:"mobile_no",className:"bg-gray-50 border border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:border-blue-500 dark:focus:ring-blue-500 dark:placeholder-gray-400 dark:text-white disabled:cursor-not-allowed disabled:opacity-50 focus:border-blue-500 focus:ring-blue-500 p-2.5 rounded-lg text-gray-900 text-sm w-full",placeholder:"Advisor Mobile Number",type:"number",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.mobile_no||"",invalid:!!(a.touched.mobile_no&&a.errors.mobile_no)}),a.touched.mobile_no&&a.errors.mobile_no?r(c,{type:"invalid",className:"text-Red text-sm",children:[" ",a.errors.mobile_no,"  "]}):null]})]})]}),r("div",{className:"md:flex gap-x-[2rem]",children:[r("div",{className:"flex-1 mt-[1rem]",children:[r(d,{htmlFor:"address",children:["Address ",t("span",{className:"text-red-500",children:"*"})," "]}),r("div",{className:"mt-1",children:[t(h,{id:"address",name:"address",className:"bg-gray-50 border border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:border-blue-500 dark:focus:ring-blue-500 dark:placeholder-gray-400 dark:text-white disabled:cursor-not-allowed disabled:opacity-50 focus:border-blue-500 focus:ring-blue-500 p-2.5 rounded-lg text-gray-900 text-sm w-full",placeholder:"Advisor Address",type:"text",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.address||"",invalid:!!(a.touched.address&&a.errors.address)}),a.touched.address&&a.errors.address?r(c,{type:"invalid",className:"text-Red text-sm",children:[" ",a.errors.address," "]}):null]})]}),r("div",{className:"flex-1 mt-[1rem]",children:[t(d,{htmlFor:"date_of_birth",children:"Date of Birth"}),r("div",{className:"mt-1",children:[t(h,{id:"date_of_birth",name:"date_of_birth",className:"bg-gray-50 border border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:border-blue-500 dark:focus:ring-blue-500 dark:placeholder-gray-400 dark:text-white disabled:cursor-not-allowed disabled:opacity-50 focus:border-blue-500 focus:ring-blue-500 p-2.5 rounded-lg text-gray-900 text-sm w-full",placeholder:"date_of_birth",type:"date",max:Ie,onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.date_of_birth||"",invalid:!!(a.touched.date_of_birth&&a.errors.date_of_birth)}),a.touched.date_of_birth&&a.errors.date_of_birth?r(c,{type:"invalid",className:"text-Red text-sm",children:[" ",a.errors.date_of_birth,"  "]}):null]})]}),r("div",{className:"flex-1 mt-[1rem]",children:[t(d,{htmlFor:"date_of_joining",children:"Date of Joining"}),r("div",{className:"mt-1",children:[t(h,{id:"date_of_joining",name:"date_of_joining",className:"bg-gray-50 border border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:border-blue-500 dark:focus:ring-blue-500 dark:placeholder-gray-400 dark:text-white disabled:cursor-not-allowed disabled:opacity-50 focus:border-blue-500 focus:ring-blue-500 p-2.5 rounded-lg text-gray-900 text-sm w-full",placeholder:"Advisor date_of_joining",type:"date",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.date_of_joining||"",invalid:!!(a.touched.date_of_joining&&a.errors.date_of_joining)}),a.touched.date_of_joining&&a.errors.date_of_joining?r(c,{type:"invalid",className:"text-Red text-sm",children:[" ",a.errors.date_of_joining,"  "]}):null]})]})]}),r("div",{className:"md:flex gap-x-[2rem] ",children:[r("div",{className:"flex-1 mt-[1rem]",children:[r(d,{htmlFor:"email",children:[" Status ",t("span",{className:"text-red-500",children:"*"})," "]}),r("div",{className:"mt-1",children:[t(f,{className:"w-full dark:text-white",classNames:{control:()=>"react-select__control",singleValue:()=>"react-select__single-value",menu:()=>"react-select__menu",option:({isSelected:l})=>l?"react-select__option--is-selected":"react-select__option",placeholder:()=>"react-select__placeholder"},value:xe,onChange:l=>{Ne(l)},options:P,isClearable:!0}),ye==1?t(c,{type:"invalid",className:"text-Red text-sm",children:" Please select status  "}):null]})]}),r("div",{className:"flex-1 mt-[1rem]",children:[r(d,{htmlFor:"emergency_contact_person",children:["Emergency contact person ",t("span",{className:"text-red-500",children:"*"})," "]}),r("div",{className:"mt-1",children:[t(h,{id:"emergency_contact_person",name:"emergency_contact_person",className:"bg-gray-50 border border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:border-blue-500 dark:focus:ring-blue-500 dark:placeholder-gray-400 dark:text-white disabled:cursor-not-allowed disabled:opacity-50 focus:border-blue-500 focus:ring-blue-500 p-2.5 rounded-lg text-gray-900 text-sm w-full",placeholder:"Emergency contact person name",type:"text",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.emergency_contact_person||"",invalid:!!(a.touched.emergency_contact_person&&a.errors.emergency_contact_person)}),a.touched.emergency_contact_person&&a.errors.emergency_contact_person?r(c,{type:"invalid",className:"text-Red text-sm",children:[" ",a.errors.emergency_contact_person,"  "]}):null]})]}),r("div",{className:"flex-1 mt-[1rem]",children:[r(d,{htmlFor:"emergency_mobile_no",children:["Emergency mobile no ",t("span",{className:"text-red-500",children:"*"})," "]}),r("div",{className:"mt-1",children:[t(h,{id:"emergency_mobile_no",name:"emergency_mobile_no",className:"bg-gray-50 border border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:border-blue-500 dark:focus:ring-blue-500 dark:placeholder-gray-400 dark:text-white disabled:cursor-not-allowed disabled:opacity-50 focus:border-blue-500 focus:ring-blue-500 p-2.5 rounded-lg text-gray-900 text-sm w-full",placeholder:"Emergency contact person mobile number",type:"number",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.emergency_mobile_no||"",invalid:!!(a.touched.emergency_mobile_no&&a.errors.emergency_mobile_no)}),a.touched.emergency_mobile_no&&a.errors.emergency_mobile_no?r(c,{type:"invalid",className:"text-Red text-sm",children:[" ",a.errors.emergency_mobile_no,"  "]}):null]})]})]}),r("div",{className:"md:flex gap-x-[2rem]",children:[r("div",{className:"flex-1  mt-[1rem]",children:[r(d,{htmlFor:"password",children:["Aadhar card ",t("span",{className:"text-red-500",children:"*"})," "]}),r("div",{className:"mt-1",children:[t(f,{className:"w-full dark:text-white",classNames:{control:()=>"react-select__control",singleValue:()=>"react-select__single-value",menu:()=>"react-select__menu",option:({isSelected:l})=>l?"react-select__option--is-selected":"react-select__option",placeholder:()=>"react-select__placeholder"},value:ke,onChange:l=>{Se(l)},options:m,isClearable:!0}),we==1?t(c,{type:"invalid",className:"text-Red text-sm",children:" Please select aadhar card status  "}):null]})]}),r("div",{className:"flex-1  mt-[1rem]",children:[r(d,{htmlFor:"pan_card",children:["Pan card ",t("span",{className:"text-red-500",children:"*"})," "]}),r("div",{className:"mt-1",children:[t(f,{className:"w-full dark:text-white",classNames:{control:()=>"react-select__control",singleValue:()=>"react-select__single-value",menu:()=>"react-select__menu",option:({isSelected:l})=>l?"react-select__option--is-selected":"react-select__option",placeholder:()=>"react-select__placeholder"},value:Pe,onChange:l=>{Re(l)},options:m,isClearable:!0}),Ae==1?t(c,{type:"invalid",className:"text-Red text-sm",children:" Please select pan card status  "}):null]})]}),r("div",{className:"flex-1  mt-[1rem]",children:[r(d,{htmlFor:"bank_passbook",children:["Bank passbook ",t("span",{className:"text-red-500",children:"*"})," "]}),r("div",{className:"mt-1",children:[t(f,{className:"w-full dark:text-white",classNames:{control:()=>"react-select__control",singleValue:()=>"react-select__single-value",menu:()=>"react-select__menu",option:({isSelected:l})=>l?"react-select__option--is-selected":"react-select__option",placeholder:()=>"react-select__placeholder"},value:Ee,onChange:l=>{Fe(l)},options:m,isClearable:!0}),Ce==1?t(c,{type:"invalid",className:"text-Red text-sm",children:" Please select passbook status  "}):null]})]})]}),r("div",{className:"flex gap-x-3 justify-end mt-[3rem]",children:[r(ue,{className:"bg-addbutton hover:bg-addbutton dark:bg-addbutton dark:hover:bg-addbutton",type:"submit",children:["  ",u?"Update Advisor":" Add Advisor"," "]}),t(ue,{className:"bg-deletebutton hover:bg-deletebutton dark:bg-deletebutton dark:hover:bg-deletebutton",onClick:()=>X(J),children:"  Close "})]})]})})]}),t(Ue,{})]})};export{ha as default};
