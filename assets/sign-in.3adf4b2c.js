import{u as M,a as R,r as t,D as B,b as $,E as m,c as x,d as s,F as D,j as a,I,J as j,K as u,M as g,O as z,P as A}from"./index.b6833530.js";import{C as Y}from"./Card.f3d7b329.js";import{u as q,c as O,a as w,F as Z,L as h}from"./formik.esm.1dcdd950.js";import{l as H}from"./logo.265d9f73.js";import{g as J,h as K}from"./utils.7e7ecbc8.js";import{F as y}from"./FormFeedback.b1d46ea7.js";import{I as v}from"./Input.e13d00be.js";import T from"./ToastMessage.356bd70a.js";const ae=function(){const i=M(),d=R(),[N,p]=t.exports.useState(!0),[c,k]=t.exports.useState(!1),e=q({enableReinitialize:!0,initialValues:{email:"",password:""},validationSchema:O({email:w().required("Please Enter Email").matches(/^[^@]+@[^@]+$/,"Email must contain one '@'").matches(/@[^@]+\.[^@]+$/,"Email must contain one '.' after '@'").matches(/^[^\s@]+@[^\s@]+\.[^\s@]+$/,"Invalid email format"),password:w().required("Please Enter Password").min(5,"Password must be at least 5 characters long").max(10,"Password must be at most 10 characters long").matches(/[A-Z]/,"Password must contain at least one uppercase letter (A-Z)").matches(/\d/,"Password must contain at least one numeric digit (0-9)").matches(/[@$!%*?&]/,"Password must contain at least one special character (@$!%*?&)")}),onSubmit:r=>{p(!0),d(B(r))}}),[f,P]=t.exports.useState(!1),[E,S]=t.exports.useState(""),{login:o,CheckUserList:l}=$(r=>({login:r.Login.Logincode,CheckUserList:r.User.CheckUserList}));t.exports.useEffect(()=>{var r;p(!1),P(o?o.success:null),S(o?(r=o==null?void 0:o.data)==null?void 0:r.roles:null)},[o]),t.exports.useEffect(()=>{(l==null?void 0:l.success)==!1?m.error(l==null?void 0:l.msg):(l==null?void 0:l.success)==!0&&n(!0)},[l]),t.exports.useEffect(()=>{f==!0&&(e.resetForm(),E=="67b1195be442284118ab89bf"?(i("/sales-crm"),location.reload()):(i("/dashboard"),location.reload()))},[f]),t.exports.useEffect(()=>{const r=x.get("role"),b=x.get("token");b&&r!="67b1195be442284118ab89bf"?i("/dashboard"):b&&r=="67b1195be442284118ab89bf"&&i("/sales-crm")},[]);const[F,n]=t.exports.useState(!1),C=()=>{if(e.values.email){let r={search:e.values.email};d(z(r))}else m.error("Please enter email")},L=()=>{n(!1);let r={email:e.values.email};d(A(r)),m.success("Please contact your admin")};return s(D,{children:[N?a(I,{}):null,s("div",{className:"flex flex-col items-center justify-center px-6 lg:h-screen lg:gap-y-6",children:[s("div",{className:"my-6 flex items-center gap-x-1 lg:my-0",children:[" ",a("img",{alt:"logo",src:H,className:"mr-3 h-12"})," "]}),s(Y,{horizontal:!0,imgSrc:"/images/authentication/login_3.png",imgAlt:"",className:"w-full lg:max-w-screen-lg md:max-w-screen-md [&>img]:hidden md:[&>img]:w-[31rem] md:[&>img]:p-0 md:[&>*]:w-full md:[&>*]:p-16 lg:[&>img]:block",children:[a("h1",{className:"mb-3 text-2xl font-bold dark:text-white md:text-3xl",children:" Sign in "}),s(Z,{onSubmit:r=>(r.preventDefault(),e.handleSubmit(),!1),children:[s("div",{className:"mb-4 flex flex-col gap-y-2",children:[a(h,{htmlFor:"email",children:"Your Email"}),a(v,{name:"email",className:"bg-gray-50 border border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:border-blue-500 dark:focus:ring-blue-500 dark:placeholder-gray-400 dark:text-white disabled:cursor-not-allowed disabled:opacity-50 focus:border-blue-500 focus:ring-blue-500 p-2.5 rounded-lg text-gray-900 text-sm w-full",placeholder:"Enter your email",type:"email",onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.email||"",invalid:!!(e.touched.email&&e.errors.email)}),e.touched.email&&e.errors.email?a(y,{type:"invalid",className:"text-Red",children:e.errors.email}):null]}),s("div",{className:"mb-6 flex flex-col gap-y-2",children:[a(h,{htmlFor:"password",children:"Your password"}),s("div",{children:[s("div",{className:"relative w-full",children:[a(v,{name:"password",className:"bg-gray-50 border border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:border-blue-500 dark:focus:ring-blue-500 dark:placeholder-gray-400 dark:text-white disabled:cursor-not-allowed disabled:opacity-50 focus:border-blue-500 focus:ring-blue-500 p-2.5 rounded-lg text-gray-900 text-sm w-full",placeholder:"Enter password",type:c?"text":"password",onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.password||"",invalid:!!(e.touched.password&&e.errors.password)}),s("button",{type:"button",className:"absolute inset-y-0 right-3 flex items-center text-gray-500 dark:text-gray-100",onClick:()=>k(!c),children:[" ",c?a(J,{size:20}):a(K,{size:20})," "]})]}),e.touched.password&&e.errors.password?s(y,{type:"invalid",className:"text-Red",children:[" ",e.errors.password," "]}):null]})]}),s("div",{className:"mb-6 flex items-center justify-between",children:[s("div",{className:"flex items-center gap-x-3",children:[" ",a(j,{id:"rememberMe",name:"rememberMe"})," ",a(h,{htmlFor:"rememberMe",children:"Remember me"}),"  "]}),a("a",{onClick:()=>C(),className:"w-1/2 text-right text-sm text-primary-600 dark:text-primary-300 cursor-pointer",children:" Lost Password? "})]}),s("div",{className:"mb-6",children:["  ",a(u,{type:"submit",className:"w-full ",children:"  Login to your account  "})," "]})]})]}),s(g,{onClose:()=>n(!1),show:F,size:"md",children:[s(g.Header,{className:"px-6 pt-6 pb-0",children:[" ",a("span",{className:"sr-only",children:" Send Email to admin"})]}),a(g.Body,{className:"px-6 pt-0 pb-6",children:s("div",{className:"flex flex-col items-center gap-y-6 text-center",children:["  ",a("p",{className:"text-xl text-gray-500",children:" Are you sure? You want  to send email to admin? "}),s("div",{className:"flex items-center gap-x-3",children:[a(u,{color:"failure",onClick:()=>L(),children:"  Yes, I'm sure "}),a(u,{color:"gray",onClick:()=>n(!1),children:" No, cancel "})]})]})})]}),a(T,{})]})]})};export{ae as default};
